<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>

<h1>멤버 목록5</h1>
<p><a href='form'>새회원</a></p>



<table id="eListTable" border='1'>

<thead>
<tr><th>아이디</th><th>이메일</th></tr>
</thead>

<tbody></tbody>
</table>



<div>
<button id="ePrevBtn">[이전]</button>
<span id="ePageNo"></span>
<button id="eNextBtn">[다음]</button>
</div>

<script>

var tbody = document.querySelector('#eListTable > tbody');

var data =null;

var xhr = new XMLHttpRequest();

xhr.onreadystatechange = function() {
    if (xhr.readyState < 4) return;
    if (xhr.status !== 200) {
        alert("서버에서 오류 발생!");
        return;
    }
    

    data = JSON.parse(xhr.responseText);
    for( var item of data.list){
    	var tr = document.createElement("tr");
    	tr.innerHTML =
    		`<td><a href='view/${item.id}'>${item.id}</a></td>`+
    		`<td>${item.email}</td>`;
    	tbody.appendChild(tr);	    
        }
    ePageNo.innerHTML =data.page;
    
    if(data.page <= 1)
    	  ePrevBtn.setAttribute('disabled',true);
    if(data.page >=data.totalPage)
    	  eNextBtn.setAttribute('disabled',true);
    };  

// 서버에 값을 보낼 때 URL에 붙여 보낸다.
xhr.open('GET', '../../json/member/list', true);
xhr.send();

ePrevBtn.onclick = function(){
	console.log("ePrevBtn")
};

eNextBtn.onclick = function(){
	console.log("eNextBtn")
};




</script>
</body>
</html>